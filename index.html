<!DOCTYPE html>
<html>
<head>
<title>Ticket Raising System</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
body{font-family:Arial;background:#f4f7fb;padding:30px;}
form{max-width:500px;margin:auto;background:#fff;padding:25px;border-radius:10px;}
input,textarea,button{width:100%;margin-bottom:15px;padding:10px;}
button{background:#00689d;color:#fff;border:none;}
</style>
</head>

<body>

<h2 align="center">Raise a Ticket</h2>

<form id="ticketForm">
  <input type="text" id="name" placeholder="Your Name" required>
  <input type="email" id="email" placeholder="Email" required>
  <input type="text" id="subject" placeholder="Subject" required>
  <textarea id="description" placeholder="Describe your issue" required></textarea>
  <button type="submit">Submit Ticket</button>
</form>

<script>
const supabase = supabase.createClient(
  "https://qqmcosryfkdkpdakbxye.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFxbWNvc3J5Zmtka3BkYWtieHllIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5Mjk0ODYsImV4cCI6MjA4NDUwNTQ4Nn0.0q7-X3DEYyyQrCkdVCeRJXWWcfzrsm4TmwX64GzZ5Z0"
);

document.getElementById("ticketForm").addEventListener("submit", async (e)=>{
  e.preventDefault();

  const { error } = await supabase
    .from("tickets")
    .insert([{
      name: name.value,
      email: email.value,
      subject: subject.value,
      description: description.value
    }]);

  if(error){
    alert(error.message);
  }else{
    alert("Ticket submitted successfully!");
    e.target.reset();
  }
});
</script>

</body>
</html>

